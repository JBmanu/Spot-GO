@layer components {
    .spot-detail-wrapper {
        @apply flex flex-col w-full overflow-visible relative;
        min-height: auto;
        --category-rgb: 107 114 128;
    }

    .spot-detail-wrapper[data-category="food"] {
        --category-rgb: 201 80 10;
    }

    .spot-detail-wrapper[data-category="culture"] {
        --category-rgb: 175 140 80;
    }

    .spot-detail-wrapper[data-category="nature"] {
        --category-rgb: 13 90 63;
    }

    .spot-detail-wrapper[data-category="mystery"] {
        --category-rgb: 70 30 110;
    }

    .spot-detail-wrapper {
        --cat-text: rgb(var(--category-rgb));
        --cat-outline-20: rgba(var(--category-rgb) / 0.20);
        --cat-outline-25: rgba(var(--category-rgb) / 0.25);
        --cat-border-strong: rgba(var(--category-rgb) / 0.8);
        --ink-82: rgba(17, 24, 39, 0.82);
        --cat-tint-strong: rgba(var(--category-rgb) / 0.38);
        --cat-tint-medium: rgba(var(--category-rgb) / 0.12);
        --cat-tint-light: rgba(var(--category-rgb) / 0.07);
        --cat-grad-hero: radial-gradient(250% 150% at 22% 16%, var(--cat-tint-strong) 0%, transparent 80%);
        --cat-grad-card: radial-gradient(120% 100% at 14% 10%, var(--cat-tint-medium) 0%, transparent 72%);
        --cat-grad-lite: radial-gradient(110% 90% at 16% 12%, var(--cat-tint-light) 0%, transparent 75%);
    }

    .spot-detail-container {
        @apply flex-1 overflow-visible justify-center pb-1;
    }

    .spot-detail-header {
        @apply relative w-full h-72 overflow-hidden;
        border-bottom: 1px solid rgba(255, 255, 255, 0.35);
    }

    .spot-detail-image-container {
        @apply relative w-full h-full overflow-hidden;
    }

    .spot-detail-image {
        @apply w-full h-full block;
        object-fit: cover;
        filter: contrast(1.03) brightness(1.03);
        transform: scale(1.02);
    }

    .spot-detail-title-container {
        @apply px-4 py-3 flex justify-between items-center gap-3 relative;
    }

    .spot-detail-title-section {
        @apply flex-1 flex flex-col gap-2 items-start relative;
        z-index: 1;
    }

    .spot-detail-title {
        @apply text-3xl font-black leading-tight m-0 capitalize;
        letter-spacing: 0.01em;
        color: var(--cat-text);
        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.55), 0 10px 26px rgba(0, 0, 0, 0.06);
    }

    .spot-detail-rating {
        @apply flex items-center gap-2 text-xs font-black px-3 py-2 shrink-0 rounded-2xl relative;
        z-index: 1;
        letter-spacing: 0.05em;
        color: var(--color-text_color);
    }

    .rating-star {
        @apply w-4 h-4;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.10));
    }

    .spot-detail-bookmark-button {
        @apply fixed right-4 top-[92px] w-12 h-12 flex items-center justify-center rounded-2xl z-40;
        transition: transform 180ms ease;
    }

    .spot-detail-bookmark-button:active {
        transform: scale(0.96);
    }

    .spot-detail-bookmark-button::after {
        content: "";
        @apply absolute inset-0 rounded-2xl pointer-events-none;
        border: 1px solid var(--cat-outline-25);
        opacity: 0.9;
    }

    .spot-detail-bookmark-button .bookmark-icon {
        @apply w-6 h-6;
        filter: saturate(1.2) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.12));
    }

    .spot-detail-description-compact {
        @apply px-4 -mt-6 relative z-10 m-0 p-4 rounded-3xl text-sm leading-relaxed;
    }

    .spot-detail-description-compact .spot-detail-description {
        @apply m-0 p-4 rounded-3xl text-sm leading-relaxed font-bold;
        background: var(--cat-tint-strong);
    }

    .spot-detail-missions-banner {
        @apply w-2xs mx-auto mb-4 flex items-center justify-center gap-3 rounded-xl px-4 py-3 relative overflow-hidden;
        z-index: 5;
        cursor: pointer;
        transition: transform 180ms ease;
        border-radius: 24px;
        border: 1px solid var(--cat-outline-20);
        background: var(--cat-grad-lite), linear-gradient(145deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.2));
    }

    .spot-detail-missions-banner:hover {
        transform: scale(1.02);
    }

    .spot-detail-missions-banner:active {
        transform: scale(0.98);
    }

    .missions-icon {
        @apply w-5 h-5 shrink-0;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.10));
    }

    .missions-text {
        @apply text-xs font-semibold whitespace-nowrap;
        letter-spacing: 0.02em;
        text-decoration: underline;
        text-decoration-thickness: 2px;
        text-underline-offset: 3px;
    }

    .spot-detail-info-detailed {
        @apply mx-4 mt-4 p-5 rounded-3xl flex flex-col gap-4 relative overflow-hidden;
        border-radius: 24px;
        transition: box-shadow 0.2s, border-color 0.2s, background 0.2s;
        background: linear-gradient(135deg, rgba(var(--category-rgb), 0.15) 0%, rgba(255, 255, 255, 0.4) 100%);
        border: 1px solid rgb(var(--category-rgb));
        box-shadow: 0 18px 42px rgba(var(--category-rgb), 0.15), 0 6px 14px rgba(0, 0, 0, 0.04), inset 0 1px 0 rgba(255, 255, 255, 0.6);
    }

    .info-row {
        @apply flex items-start gap-3 relative;
        z-index: 1;
    }

    .info-content {
        @apply flex-1 flex flex-col gap-1;
    }

    .info-icon {
        @apply w-5 h-5 shrink-0 mt-px;
        opacity: 0.85;
        color: rgb(var(--category-rgb));
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.10));
    }

    .info-label {
        @apply text-[11px] font-black uppercase;
        letter-spacing: 0.07em;
        color: var(--color-text_color);
    }

    .info-value {
        @apply text-sm;
        letter-spacing: 0.01em;
        color: var(--ink-82);
    }

    .info-label-with-distance {
        @apply flex items-center justify-between gap-2;
    }

    .info-distance-label {
        @apply flex items-center gap-1 text-xs font-semibold;
        color: var(--color-text_color);
    }

    .info-distance-label .icon-mini {
        @apply w-[13px] h-[13px];
    }

    .spot-missions-details {
        @apply px-4 pt-2 pb-1;
    }

    .missions-list {
        @apply grid grid-cols-2 gap-3 mt-3;
    }

    .mission-item {
        @apply relative;
    }

    .mission-banner {
        @apply w-full min-h-16 px-4 py-3 rounded-3xl text-xs font-black uppercase text-center flex items-center justify-center;
        letter-spacing: 0.05em;
        color: var(--ink-82);
        transition: transform 180ms ease;
        border-radius: 24px;
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.3), rgba(var(--category-rgb) / 0.05));
        border: 1px solid var(--cat-outline-20);
    }

    .mission-banner:active {
        transform: scale(0.985);
    }

    .mission-banner.completed {
        color: rgb(var(--category-rgb));
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.9), rgba(var(--category-rgb) / 0.2));
        border: 1px solid rgb(var(--category-rgb));
    }

    .missions-toggle-button {
        @apply w-10 h-10 grid place-items-center rounded-2xl relative;
        z-index: 1;
        transition: transform 180ms ease;
    }

    .missions-toggle-button:active {
        transform: scale(0.96);
    }

    .toggle-arrow {
        @apply w-5 h-5;
        opacity: 0.85;
        transition: transform 220ms ease;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.12));
    }

    .spot-reviews {
        @apply flex items-end justify-between gap-3 w-full px-4 pt-6 pb-0 mt-2;
    }

    .spot-add-review-button {
        @apply px-4 py-3 rounded-2xl text-xs font-black uppercase;
        letter-spacing: 0.04em;
        color: var(--color-text_color);
        background: var(--cat-grad-hero);
        border: 1px solid var(--cat-outline-20);
        transition: transform 180ms ease;
    }

    .spot-add-review-button:active {
        transform: scale(0.98);
    }

    .spot-view-all-reviews-button {
        @apply px-1 py-2 text-xs font-bold underline;
        text-decoration-thickness: 2px;
        text-underline-offset: 4px;
    }

    .spot-view-all-reviews-button:active {
        transform: scale(0.98);
    }

    .spot-reviews-carousel-container {
        @apply w-full;
    }

    .spot-reviews-carousel-wrapper {
        @apply flex overflow-x-auto overflow-y-hidden w-full gap-4 py-5 px-3;
        scroll-snap-type: x mandatory;
        scroll-behavior: smooth;
        -webkit-overflow-scrolling: touch;
    }

    .spot-reviews-carousel-wrapper::-webkit-scrollbar {
        display: none;
    }

    .spot-reviews-carousel-track {
        @apply flex gap-4;
    }

    .spot-reviews-carousel-wrapper.is-dragging {
        scroll-behavior: auto;
        @apply cursor-grabbing;
    }

    .spot-review-carousel-item {
        @apply shrink-0;
        flex: 0 0 calc(100% - 72px);
        scroll-snap-align: start;
        scroll-snap-stop: always;
    }

    .spot-review-item {
        @apply p-4 rounded-3xl h-[200px] w-[380px] flex flex-col gap-3 relative overflow-hidden;
        border-radius: 24px;
        border: 1px solid var(--cat-border-strong);
        background: var(--cat-grad-hero);
    }

    .spot-review-header {
        @apply flex justify-between items-center gap-2 relative;
        z-index: 1;
    }

    .spot-review-author {
        @apply font-black text-sm capitalize;
        color: var(--color-text_color);
        letter-spacing: 0.02em;
    }

    .spot-review-rating {
        @apply flex items-center gap-1 text-xs font-black px-3 py-1.5 rounded-2xl whitespace-nowrap relative;
        z-index: 1;
        letter-spacing: 0.03em;
        color: var(--color-text_color);
        background: rgba(255, 255, 255, 0.45);
        border: 1px solid var(--cat-outline-25);
    }

    .spot-review-text {
        @apply text-sm leading-relaxed m-0 font-medium flex-1 relative;
        z-index: 1;
        color: var(--color-text_color);
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .spot-detail-actions {
        @apply sticky bottom-0 z-50 w-full p-3 flex gap-3;
        box-shadow: 0 32px 72px rgba(0, 0, 0, 0.20), 0 12px 26px rgba(0, 0, 0, 0.12);
    }

    .spot-detail-action-button {
        @apply flex-1 flex items-center justify-center gap-3 px-5 py-4 rounded-3xl text-xs font-black uppercase relative overflow-hidden;
        z-index: 1;
        letter-spacing: 0.05em;
        background: var(--cat-grad-lite);
        transition: transform 180ms ease;
    }

    .spot-detail-action-button::after {
        content: "";
        @apply absolute inset-0.5 pointer-events-none;
        border: 1px solid rgba(var(--category-rgb) / 0.18);
        border-radius: 20px;
        opacity: 0.95;
    }

    .spot-detail-action-button:active {
        transform: scale(0.985);
    }

    .spot-detail-action-button .icon-mini {
        @apply w-[22px] h-[22px];
        opacity: 0.95;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.10));
    }

    .spot-detail-visit-button.visited {
        border-color: rgba(76, 175, 80, 0.32);
    }
}