@layer components {
    .spot-detail-wrapper {
        @apply flex flex-col w-full overflow-visible relative;
        min-height: auto;
        --category-rgb: 107 114 128;
    }

    .spot-detail-wrapper[data-category="food"] {
        --category-rgb: 201 80 10;
    }

    .spot-detail-wrapper[data-category="culture"] {
        --category-rgb: 175 140 80;
    }

    .spot-detail-wrapper[data-category="nature"] {
        --category-rgb: 13 90 63;
    }

    .spot-detail-wrapper[data-category="mystery"] {
        --category-rgb: 70 30 110;
    }

    .spot-detail-wrapper {
        --cat-text: rgb(var(--category-rgb));
        --cat-outline-20: rgba(var(--category-rgb) / 0.20);
        --cat-outline-25: rgba(var(--category-rgb) / 0.25);
        --cat-border-strong: rgba(var(--category-rgb) / 0.8);
        --ink-82: rgba(17, 24, 39, 0.82);
        --cat-tint-strong: rgba(var(--category-rgb) / 0.38);
        --cat-tint-medium: rgba(var(--category-rgb) / 0.12);
        --cat-tint-light: rgba(var(--category-rgb) / 0.07);
        --cat-grad-hero: radial-gradient(250% 150% at 22% 16%, var(--cat-tint-strong) 0%, transparent 80%);
        --cat-grad-card: radial-gradient(120% 100% at 14% 10%, var(--cat-tint-medium) 0%, transparent 72%);
        --cat-grad-lite: radial-gradient(110% 90% at 16% 12%, var(--cat-tint-light) 0%, transparent 75%);
    }

    .spot-detail-category-label {
        @apply inline-flex items-center gap-2 px-3.5 py-1.5 rounded-full mt-2;
        background: linear-gradient(135deg, var(--cat-tint-medium), var(--cat-tint-light));
        backdrop-filter: blur(8px) saturate(110%);
        border: 1px solid rgba(255, 255, 255, 0.4);
        box-shadow: 0 4px 12px rgba(var(--category-rgb), 0.15), inset 0 1px 0 rgba(255, 255, 255, 0.3);
        color: var(--cat-text);
        font-size: 11px;
        font-weight: 800;
        letter-spacing: 0.08em;
        text-transform: uppercase;
        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.4);
    }

    .spot-category-icon {
        width: 15px;
        height: 15px;
        filter: drop-shadow(0 1px 2px rgba(var(--category-rgb), 0.3));
        opacity: 0.95;
    }

    .spot-detail-container {
        @apply flex-1 overflow-visible justify-center pb-1 relative;
    }

    .spot-detail-header {
        @apply relative w-full h-72 overflow-hidden;
        border-bottom: 1px solid rgba(255, 255, 255, 0.35);
    }

    .spot-detail-image-container {
        @apply relative w-full h-full overflow-hidden;
    }

    .spot-detail-image {
        @apply w-full h-full block;
        object-fit: cover;
        filter: contrast(1.03) brightness(1.03);
        transform: scale(1.02);
    }

    .spot-detail-title-container {
        @apply px-3 py-2.5 flex justify-between items-center gap-3 relative;
    }

    .spot-detail-title-section {
        @apply flex-1 flex flex-col gap-2 items-start relative z-10;
    }

    .spot-detail-title {
        @apply text-3xl font-black leading-tight m-0 capitalize;
        letter-spacing: 0.01em;
        color: var(--cat-text);
        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.55), 0 10px 26px rgba(0, 0, 0, 0.06);
    }

    .spot-detail-rating {
        @apply flex items-center gap-1.5 text-sm font-black px-4 py-2 shrink-0 rounded-2xl relative overflow-hidden z-10;
        letter-spacing: 0.01em;
        color: var(--color-text_color);
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.25));
        backdrop-filter: blur(16px) saturate(140%);
        border: 1px solid rgba(255, 255, 255, 0.6);
        box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12), inset 0 0 0 1px rgba(255, 255, 255, 0.4), inset 0 0 12px var(--cat-outline-20);
    }

    .spot-detail-rating span {
        font-size: 16px;
        line-height: 1;
        margin-top: 1px;
        filter: drop-shadow(0 1px 0 rgba(255, 255, 255, 0.5));
    }

    .rating-star {
        @apply w-4.5 h-4.5;
        filter: drop-shadow(0 2px 4px rgba(212, 175, 55, 0.4)) drop-shadow(0 0 2px rgba(255, 215, 0, 0.6));
        transform: translateY(-0.5px);
    }

    .spot-detail-bookmark-button {
        @apply fixed right-4 top-[92px] w-12 h-12 flex items-center justify-center rounded-2xl z-40;
        transition: transform 180ms ease;
    }

    .spot-detail-bookmark-button:active {
        transform: scale(0.96);
    }

    .spot-detail-bookmark-button::after {
        content: "";
        @apply absolute inset-0 rounded-2xl pointer-events-none;
        border: 1px solid var(--cat-outline-25);
        opacity: 0.9;
    }

    .spot-detail-bookmark-button .bookmark-icon {
        @apply w-6 h-6;
        filter: saturate(1.2) drop-shadow(0 2px 4px rgba(0, 0, 0, 0.10));
    }

    .spot-detail-description-compact {
        @apply p-3 -mt-8 relative z-10 m-0 rounded-3xl text-sm leading-relaxed;
    }

    .spot-detail-description-compact .spot-detail-description {
        @apply m-0 p-4 rounded-3xl text-sm leading-relaxed font-bold;
        background: var(--cat-tint-strong);
    }

    .missions-wrapper {
        @apply w-full max-w-[70%] mx-auto mb-4 relative z-50;
    }

    .spot-detail-missions-banner {
        @apply w-full flex items-center justify-center gap-3 px-4 py-2.5 relative overflow-hidden z-20;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        border-radius: 24px;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.45), rgba(255, 255, 255, 0.35));
        border: 1px solid rgba(255, 255, 255, 0.42);
        backdrop-filter: blur(28px) saturate(170%) contrast(108%);
        box-shadow: 0 24px 48px -12px rgba(15, 23, 42, 0.18), 0 12px 24px -8px rgba(0, 0, 0, 0.08);
    }

    .spot-detail-missions-banner.expanded {
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
    }

    .spot-detail-missions-banner:active {
        transform: scale(0.97);
    }

    .spot-detail-missions-banner::after {
        content: '';
        @apply w-4 h-4 opacity-40;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='9 18 15 12 9 6'%3E%3C/polyline%3E%3C/svg%3E");
        background-position: center;
        background-repeat: no-repeat;
        transition: transform 0.3s ease;
    }

    .spot-detail-missions-banner.expanded::after {
        transform: rotate(90deg);
    }

    .missions-icon {
        @apply w-6 h-6 shrink-0;
        filter: drop-shadow(0 2px 4px rgba(var(--category-rgb), 0.3));
    }

    .missions-text {
        @apply text-xs font-bold text-left;
        color: var(--color-text_color);
        letter-spacing: 0.01em;
        line-height: 1.2;
        text-decoration: none;
    }

    .missions-text span {
        color: rgba(var(--category-rgb), 1);
        font-weight: 900;
    }

    .spot-detail-info-detailed {
        @apply mx-4 mt-4 p-5 rounded-3xl flex flex-col gap-3 relative overflow-hidden;
        border-radius: 24px;
        transition: box-shadow 0.2s, border-color 0.2s, background 0.2s;
        background: linear-gradient(135deg, rgba(var(--category-rgb), 0.15) 0%, rgba(255, 255, 255, 0.26) 100%);
        border: 1px solid rgb(var(--category-rgb));
        box-shadow: 0 18px 42px rgba(var(--category-rgb), 0.15), 0 6px 14px rgba(0, 0, 0, 0.04), inset 0 1px 0 rgba(255, 255, 255, 0.42);
    }

    .info-row {
        @apply flex items-start gap-3 relative z-10;
    }

    .info-content {
        @apply flex-1 flex flex-col gap-1;
    }

    .info-icon {
        @apply w-5 h-5 shrink-0 mt-px;
        opacity: 0.85;
        color: rgb(var(--category-rgb));
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.10));
    }

    .info-label {
        @apply text-[11px] font-black uppercase;
        letter-spacing: 0.07em;
        color: var(--color-text_color);
    }

    .info-value {
        @apply text-sm;
        letter-spacing: 0.01em;
        color: var(--ink-82);
    }

    .info-label-with-distance {
        @apply flex items-center justify-between gap-2;
    }

    .info-distance-label {
        @apply flex items-center gap-1 text-xs font-semibold;
        color: var(--color-text_color);
    }

    .info-distance-label .icon-mini {
        @apply w-[13px] h-[13px];
    }

    .spot-missions-details {
        @apply w-full absolute top-12 left-0 right-0 z-10 pt-2 pb-4 px-4;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.45), rgba(255, 255, 255, 0.35));
        backdrop-filter: blur(28px) saturate(170%) contrast(108%);
        border-bottom-left-radius: 24px;
        border-bottom-right-radius: 24px;
        box-shadow: 0 24px 48px -12px rgba(15, 23, 42, 0.18), 0 12px 24px -8px rgba(0, 0, 0, 0.08);
        border: 1px solid rgba(255, 255, 255, 0.42);
        border-top: none;
        margin-top: -12px;
        padding-top: 18px;
    }

    .missions-list {
        @apply flex flex-col gap-2 mt-2;
    }

    .mission-item {
        @apply relative;
    }

    .mission-banner {
        @apply w-full min-h-[48px] px-4 py-2.5 rounded-2xl text-xs font-bold uppercase text-left flex items-center justify-start gap-3;
        letter-spacing: 0.04em;
        color: var(--ink-82);
        transition: transform 180ms ease, background 0.3s;
        border-radius: 16px;
        background: rgba(255, 255, 255, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.4);
        backdrop-filter: blur(10px);
    }

    .mission-banner::before {
        content: '';
        @apply w-2 h-2 rounded-full shrink-0;
    }

    .mission-banner:active {
        transform: scale(0.985);
    }

    .mission-banner.completed {
        color: rgba(60, 60, 67, 0.5);
        background: rgba(255, 255, 255, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.3);
        pointer-events: none;
        box-shadow: none;
    }

    .mission-banner.completed::before {
        content: '';
        @apply w-4 h-4 rounded-none shrink-0;
        background-color: transparent;
        background-image: url("../../assets/icons/homepage/Detail/Done.svg");
        background-size: contain;
        background-position: center;
        background-repeat: no-repeat;
        box-shadow: none;
        filter: invert(45%) sepia(21%) saturate(285%) hue-rotate(195deg) brightness(88%) contrast(85%);
    }

    .missions-toggle-button {
        @apply w-10 h-10 grid place-items-center rounded-2xl relative z-10;
        transition: transform 180ms ease;
    }

    .missions-toggle-button:active {
        transform: scale(0.96);
    }

    .toggle-arrow {
        @apply w-5 h-5;
        opacity: 0.85;
        transition: transform 220ms ease;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.10));
    }

    .spot-reviews {
        @apply flex items-end justify-between gap-3 w-full px-4 pt-6 pb-0 mt-2;
    }

    .review-template {
        width: 85vw;
        max-width: 380px;
    }

    .spot-add-review-button {
        @apply px-3 py-2.5 rounded-2xl text-xs font-black uppercase;
        letter-spacing: 0.04em;
        color: var(--color-text_color);
        background: var(--cat-grad-hero);
        border: 1px solid var(--cat-outline-20);
        transition: transform 180ms ease;
    }

    .spot-add-review-button:active {
        transform: scale(0.98);
    }

    .spot-view-all-reviews-button {
        @apply px-1 py-2 text-xs font-bold underline;
        text-decoration-thickness: 2px;
        text-underline-offset: 4px;
    }

    .spot-view-all-reviews-button:active {
        transform: scale(0.98);
    }

    .spot-review-item {
        @apply p-4 rounded-3xl min-h-[180px] w-full flex flex-col gap-3 relative overflow-hidden;
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.28), rgba(255, 255, 255, 0.12));
        border: 1px solid rgba(255, 255, 255, 0.42);
        backdrop-filter: blur(28px) saturate(170%) contrast(108%);
        box-shadow: 0 8px 24px rgba(15, 23, 42, 0.12), 0 6px 12px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.26);
    }

    .spot-review-header {
        @apply flex justify-between items-center gap-2 relative z-10;
    }

    .spot-review-author {
        @apply font-black text-sm capitalize;
        color: rgba(17, 24, 39, 0.94);
        letter-spacing: 0.02em;
        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.35);
    }

    .spot-review-rating {
        @apply flex items-center gap-1.5 text-[11px] font-black px-3 py-1.5 rounded-2xl whitespace-nowrap relative z-10;
        letter-spacing: 0.03em;
        color: rgba(99, 102, 106, 0.88);
        background: rgba(255, 255, 255, 0.4);
        border: 1px solid rgba(255, 255, 255, 0.5);
    }

    .spot-review-text {
        @apply text-sm leading-relaxed m-0 font-medium flex-1 relative z-10 overflow-hidden;
        color: var(--color-text_color);
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        opacity: 0.9;
    }

    .spot-detail-actions {
        @apply sticky bottom-0 z-50 w-full p-3 flex gap-3;
        box-shadow: 0 32px 72px rgba(0, 0, 0, 0.20), 0 12px 26px rgba(0, 0, 0, 0.10);
    }

    .spot-detail-action-button {
        @apply flex-1 flex items-center justify-center gap-3 px-5 py-4 rounded-3xl text-xs font-black uppercase relative overflow-hidden z-10;
        letter-spacing: 0.05em;
        background: var(--cat-grad-lite);
        transition: transform 180ms ease;
    }

    .spot-detail-action-button::after {
        content: "";
        @apply absolute inset-0.5 pointer-events-none;
        border: 1px solid rgba(var(--category-rgb) / 0.18);
        border-radius: 20px;
        opacity: 0.95;
    }

    .spot-detail-action-button:active {
        transform: scale(0.985);
    }

    .spot-detail-action-button .icon-mini {
        @apply w-[22px] h-[22px];
        opacity: 0.95;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.10));
    }

    .spot-detail-visit-button.visited {
        border-color: rgba(76, 175, 80, 0.32);
    }

    .spot-reviews-empty {
        @apply flex flex-col items-center justify-center w-full py-8 px-6 text-center;
        background: var(--glass-sheet-medium);
        backdrop-filter: blur(28px) saturate(170%) contrast(108%);
        border: 1px solid var(--glass-border-soft);
        border-radius: 24px;
        margin: 1.5rem 0;
    }

    .spot-reviews-empty-icon {
        @apply mb-4 opacity-30;
        width: 48px;
        height: 48px;
        filter: grayscale(1);
    }

    .spot-reviews-empty-title {
        @apply text-base font-semibold mb-1;
        color: var(--color-text_color);
    }

    .spot-reviews-empty-text {
        @apply text-sm leading-relaxed;
        opacity: 0.6;
        color: var(--color-text_color);
        max-width: 240px;
        margin: 0 auto;
    }

    .navigation-modal-overlay {
        @apply absolute inset-0 z-2000 flex items-center justify-center p-6;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px) saturate(110%);
        opacity: 0;
        pointer-events: none;
        transition: opacity 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        overflow: hidden;
    }

    .navigation-modal-overlay.active {
        opacity: 1;
        pointer-events: auto;
    }

    .navigation-modal {
        @apply w-full max-w-xs p-8 rounded-4xl flex flex-col items-center text-center gap-4 relative overflow-hidden;
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.78), rgba(255, 255, 255, 0.42));
        border: 1px solid rgba(255, 255, 255, 0.42);
        backdrop-filter: blur(28px) saturate(170%) contrast(108%);
        box-shadow: 0 18px 44px rgba(15, 23, 42, 0.14), 0 10px 26px rgba(0, 0, 0, 0.10), inset 0 1px 0 rgba(255, 255, 255, 0.26);
        transform: translateY(30px) scale(0.95);
        transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }

    .navigation-modal-overlay.active .navigation-modal {
        transform: translateY(0) scale(1);
    }

    .navigation-modal-title {
        @apply text-2xl font-black m-0 mb-1;
        color: rgba(17, 24, 39, 0.94);
        letter-spacing: -0.02em;
        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.35);
    }

    .navigation-modal-text {
        @apply text-sm leading-relaxed m-0 opacity-80 px-2;
        color: rgba(99, 102, 106, 0.88);
    }

    .navigation-modal-actions {
        @apply flex w-full gap-3 mt-4;
    }

    .nav-modal-btn {
        @apply flex-1 py-4 rounded-3xl text-xs font-black uppercase tracking-wider transition-all active:scale-98;
    }

    .nav-modal-btn.cancel {
        background: rgba(255, 255, 255, 0.5);
        border: 1px solid rgba(255, 255, 255, 0.6);
        color: rgba(17, 24, 39, 0.6);
        backdrop-filter: blur(4px);
    }

    .nav-modal-btn.confirm {
        background: var(--color-primary_color);
        color: white;
        box-shadow: 0 8px 22px rgba(0, 0, 0, 0.08), inset 0 1px 0 rgba(255, 255, 255, 0.62);
        border: none;
        position: relative;
        overflow: hidden;
        letter-spacing: 0.12em;
    }

    .nav-modal-btn.confirm::before {
        @apply absolute inset-y-0 w-full h-full;
        content: '';
        left: -100%;
        background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
        transition: left 0.5s ease;
    }
}
