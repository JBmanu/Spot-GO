@layer components {

    .nearby-swipe {
        @apply overflow-visible;
        position: relative;
        z-index: 1;
    }

    .nearby-swipe-track {
        @apply flex flex-nowrap gap-4 overflow-x-auto px-4 pb-3 scroll-smooth snap-x snap-mandatory;
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
    }
    .nearby-swipe-track::-webkit-scrollbar { display: none; }
    .nearby-swipe-track.is-dragging { @apply cursor-grabbing; }

    .nearby-spot-shell {
        @apply relative shrink-0 snap-start flex items-center justify-center;
        width: 100%;
        max-width: 350px;
        aspect-ratio: 1.15 / 1;
        border-radius: 28px;
        padding: 10px;
        overflow: hidden;

        @apply backdrop-blur-md backdrop-saturate-160;
        border: 1.5px solid rgba(255, 255, 255, 0.35);
    }

    .nearby-spot-shell::before {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 28px;
        pointer-events: none;
        z-index: 1;
        box-shadow:
                inset 0 0 0 1px rgba(255, 255, 255, 0.28),
                inset 0 0 0 2px rgba(255, 255, 255, 0.10);
    }

    .nearby-spot-shell[data-category="food"]    { --nearby-tint: var(--cat-food); }
    .nearby-spot-shell[data-category="culture"] { --nearby-tint: var(--cat-culture); }
    .nearby-spot-shell[data-category="nature"]  { --nearby-tint: var(--cat-nature); }
    .nearby-spot-shell[data-category="mystery"] { --nearby-tint: var(--cat-mystery); }

    .nearby-spot-pedestal {
        @apply absolute inset-0;
        z-index: 0;
        opacity: 1;
        transform: scale(1.05);
        filter: blur(4px) saturate(1.65);
    }

    .nearby-spot-shell[data-category] .nearby-spot-pedestal {
        background:
                radial-gradient(
                        circle at 35% 20%,
                        rgba(255, 255, 255, 0.22) 0%,
                        rgba(255, 255, 255, 0.10) 28%,
                        transparent 55%
                ),
                radial-gradient(
                        circle,
                        transparent 0 72%,
                        rgba(var(--nearby-tint) / 0.28) 74%,
                        rgba(var(--nearby-tint) / 0.90) 82%,
                        rgba(var(--nearby-tint) / 0.80) 100%
                );
    }

    .nearby-spot-shell[data-category] .nearby-spot-pedestal::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 28px;
        pointer-events: none;
        background:
                radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 55%),
                repeating-linear-gradient(
                        0deg,
                        rgba(255,255,255,0.04) 0px,
                        rgba(255,255,255,0.04) 1px,
                        transparent 2px,
                        transparent 6px
                );
        opacity: 0.08;
        mix-blend-mode: overlay;
    }

    .nearby-card {
        @apply relative z-10 flex flex-col w-full h-full;
        border-radius: 22px;
        overflow: hidden;

        @apply backdrop-blur-[26px] backdrop-saturate-170;
        border: 1px solid rgba(255, 255, 255, 0.30);
        background: linear-gradient(
                145deg,
                rgba(255, 255, 255, 0.18),
                rgba(255, 255, 255, 0.06)
        );
    }

    .nearby-spot-shell[data-category] .nearby-card {
        box-shadow:
                0 0 0 2px rgba(var(--nearby-tint) / 0.45),
                0 10px 26px rgba(0, 0, 0, 0.14);
    }

    .nearby-media {
        @apply relative w-full overflow-hidden flex-none;
        height: 58%;
        background: rgba(0, 0, 0, 0.06);
        border-bottom: 1px solid rgba(255, 255, 255, 0.16);
    }

    .nearby-image-container { @apply w-full h-full overflow-hidden; }

    .nearby-image {
        @apply w-full h-full object-cover;
        transition: transform 0.4s ease;
    }

    .nearby-card:active .nearby-image { transform: scale(1.02); }

    .nearby-bookmark {
        @apply absolute top-3 right-3 grid place-items-center;
        width: 44px;
        height: 44px;
        border-radius: 14px;

        @apply backdrop-blur-[18px] backdrop-saturate-160;
        background: rgba(255, 255, 255, 0.22);
        border: 1px solid rgba(255, 255, 255, 0.42);

        box-shadow:
                0 6px 16px rgba(0,0,0,0.14),
                inset 0 0 0 1px rgba(255,255,255,0.18);

        z-index: 20;
        transition: transform 0.15s ease;
    }

    .nearby-bookmark:active { transform: scale(0.96); }

    .nearby-bookmark-icon { @apply w-8 h-8 object-contain; }

    .nearby-body {
        @apply relative flex-1 px-3 pt-3 pb-3 flex flex-col;
        gap: 8px;

        border-top: 1px solid rgba(255, 255, 255, 0.18);
        background: linear-gradient(
                to bottom,
                rgba(255, 255, 255, 0.22),
                rgba(255, 255, 255, 0.46)
        );
    }

    .nearby-body::before {
        content: "";
        position: absolute;
        inset: 0;
        pointer-events: none;
        background: linear-gradient(
                to bottom,
                rgba(255,255,255,0.28) 0%,
                rgba(255,255,255,0.10) 38%,
                transparent 70%
        );
        box-shadow:
                inset 0 1px 0 rgba(255, 255, 255, 0.30),
                inset 0 0 0 1px rgba(255, 255, 255, 0.14);
    }

    .nearby-spot-shell[data-category] .nearby-body {
        box-shadow: inset 0 0 0 1px rgba(var(--nearby-tint) / 0.10);
    }

    .nearby-title {
        @apply text-[18px] font-semibold uppercase leading-tight text-center;
        font-family: "Montserrat", sans-serif;
        color: var(--color-text_color);
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        letter-spacing: 0.06em;
    }

    .nearby-meta-row {
        @apply flex items-center justify-between w-full;
        gap: 12px;
        margin-top: auto;
        position: relative;
        z-index: 1;
    }

    .nearby-meta {
        @apply text-xs flex items-center gap-2;
        color: var(--color-text_color);
        opacity: 0.85;
        font-family: "Montserrat", sans-serif;
    }

    .nearby-meta-item { @apply flex items-center gap-1.5; }
    .nearby-icon-mini { @apply w-5 h-5; filter: saturate(2) contrast(1.2); }
    .nearby-meta-sep { opacity: 0.4; }

    .nearby-distance,
    .nearby-category {
        @apply text-xs font-medium tracking-[0.08em];
        font-family: "Montserrat", sans-serif;
        color: var(--color-text_color);
    }

    .nearby-rating-badge {
        @apply flex items-center justify-center gap-1 px-4 py-2 rounded-full text-sm font-black;
        @apply backdrop-blur-[14px] backdrop-saturate-150;

        background: rgba(255,255,255,0.55);
        border: 1.5px solid rgba(0,0,0,0.06);
        box-shadow: 0 10px 22px rgba(0,0,0,0.08);
    }

    .nearby-spot-shell[data-category] .nearby-rating-badge {
        border-color: rgba(var(--nearby-tint) / 0.32);
        box-shadow:
                0 10px 22px rgba(0,0,0,0.08),
                0 0 0 1px rgba(var(--nearby-tint) / 0.18);
    }

    .nearby-rating-value {
        color: var(--color-text_color);
        text-shadow: 0 1px 2px rgba(0,0,0,0.10);
    }

    .nearby-rating-star { @apply w-3.5 h-3.5 object-contain; }

    .nearby-card:active {
        transform: scale(0.985);
        box-shadow:
                0 0 0 2px rgba(var(--nearby-tint) / 0.45),
                0 16px 30px rgba(0,0,0,0.16);
    }
}
