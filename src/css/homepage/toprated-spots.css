@layer components {

    .toprated-carousel {
        @apply h-70 overflow-hidden;
        border-radius: 18px;
    }

    .toprated-carousel > .vertical-carousel-track {
        @apply h-full flex flex-col gap-4 p-2 scroll-smooth overflow-y-auto;
        -webkit-overflow-scrolling: touch;
        touch-action: pan-y;
        scrollbar-width: none;
        -ms-overflow-style: none;
    }

    .toprated-carousel > .vertical-carousel-track::-webkit-scrollbar {
        display: none;
    }

    .toprated-carousel-item[data-category="food"]    { --toprated-tint: var(--cat-food); }
    .toprated-carousel-item[data-category="culture"] { --toprated-tint: var(--cat-culture); }
    .toprated-carousel-item[data-category="nature"]  { --toprated-tint: var(--cat-nature); }
    .toprated-carousel-item[data-category="mystery"] { --toprated-tint: var(--cat-mystery); }

    .toprated-carousel-item {
        @apply relative flex rounded-2xl overflow-hidden flex-shrink-0 w-full;
        @apply items-center;
        height: 110px;
        padding: 0;
        scroll-snap-align: start;
        transition: transform 0.18s ease, box-shadow 0.18s ease;

        @apply backdrop-blur-[22px] backdrop-saturate-170;
        border: 1px solid rgba(255, 255, 255, 0.32);
        background: linear-gradient(
                145deg,
                rgba(255, 255, 255, 0.18),
                rgba(255, 255, 255, 0.06)
        );

        box-shadow:
                0 10px 26px rgba(0, 0, 0, 0.12);
    }

    .toprated-carousel-item::before {
        content: "";
        position: absolute;
        inset: -10px;
        border-radius: 22px;
        z-index: 0;
        pointer-events: none;

        opacity: 1;
        transform: scale(1.02);
        filter: blur(8px) saturate(1.6);

        background:
                radial-gradient(
                        circle at 28% 18%,
                        rgba(255, 255, 255, 0.22) 0%,
                        rgba(255, 255, 255, 0.10) 28%,
                        transparent 55%
                ),
                radial-gradient(
                        circle,
                        transparent 0 70%,
                        rgba(var(--toprated-tint) / 0.20) 73%,
                        rgba(var(--toprated-tint) / 0.65) 82%,
                        rgba(var(--toprated-tint) / 0.55) 100%
                );
    }

    .toprated-carousel-item::after {
        content: "";
        position: absolute;
        inset: 0;
        border-radius: 16px;
        z-index: 1;
        pointer-events: none;
        box-shadow:
                inset 0 0 0 1px rgba(255, 255, 255, 0.26),
                inset 0 0 0 2px rgba(255, 255, 255, 0.10),
                0 0 0 2px rgba(var(--toprated-tint) / 0.32);
        opacity: 0.95;
    }

    .toprated-carousel-item > * {
        position: relative;
        z-index: 2;
    }

    .toprated-carousel-item:active {
        transform: scale(0.985);
        box-shadow:
                0 16px 32px rgba(0, 0, 0, 0.16);
    }

    .toprated-item-image {
        @apply w-24 h-24 overflow-hidden shrink-0 rounded-lg relative block ml-2;
        background: rgba(0,0,0,0.06);
        border: 1px solid rgba(255,255,255,0.20);
    }

    .toprated-item-image img {
        @apply w-full h-full object-cover block;
        transition: transform 0.35s ease;
    }

    .toprated-carousel-item:active .toprated-item-image img {
        transform: scale(1.03);
    }

    .toprated-item-distance {
        @apply absolute bottom-2 left-2 right-2 flex items-center justify-center gap-1.5 px-3 py-1.5;
        @apply backdrop-blur-[16px] backdrop-saturate-160;
        border-radius: 999px;

        background: rgba(0,0,0,0.45);
        border: 1px solid rgba(255,255,255,0.18);
        color: white;
    }

    .toprated-distance {
        @apply text-xs font-medium text-white;
        font-family: "Montserrat", sans-serif;
    }

    .toprated-item-info {
        @apply flex flex-col items-center justify-center gap-1 px-1 pr-6 py-2 relative;
        flex: 1;
        min-width: 0;
        text-align: center;
        margin: 0 auto;
    }

    .toprated-item-title {
        @apply text-lg font-semibold uppercase leading-tight text-center w-full;
        color: var(--color-text_color);
        white-space: normal;
        word-break: break-word;
        line-height: 1.2;
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
        font-family: "Montserrat", sans-serif;
        letter-spacing: 0.06em;
    }

    .toprated-item-rating-container {
        @apply flex items-center justify-center mt-1 w-full;
    }

    .toprated-item-rating {
        @apply inline-flex items-center gap-1.5 px-4 py-2 rounded-full;
        @apply backdrop-blur-[14px] backdrop-saturate-150;

        background: rgba(255,255,255,0.55);
        border: 1.5px solid rgba(var(--toprated-tint) / 0.32);
        box-shadow:
                0 10px 22px rgba(0,0,0,0.08),
                0 0 0 1px rgba(var(--toprated-tint) / 0.16);

        transition: transform 0.18s ease;
    }

    .spot-rating-value {
        @apply text-base font-black;
        color: var(--color-text_color);
        text-shadow: 0 1px 2px rgba(0,0,0,0.10);
    }

    .rating-star {
        @apply w-4 h-4;
    }

    .toprated-item-bookmark {
        @apply absolute grid place-items-center;
        top: 50%;
        right: 10px;
        transform: translateY(-50%);

        width: 44px;
        height: 44px;
        border-radius: 14px;

        @apply backdrop-blur-[18px] backdrop-saturate-160;
        background: rgba(255, 255, 255, 0.22);
        border: 1px solid rgba(255, 255, 255, 0.42);

        box-shadow:
                0 6px 16px rgba(0,0,0,0.14),
                inset 0 0 0 1px rgba(255,255,255,0.18);

        z-index: 20;
        transition: transform 0.15s ease;
        cursor: pointer;
    }

    .toprated-item-bookmark:active {
        transform: translateY(-50%) scale(0.96);
    }

    .toprated-item-bookmark .bookmark-icon {
        @apply w-8 h-8;
        filter: saturate(1.3) contrast(1.05);
    }

}
