@layer components {

    .chat-view-overlay {
        @apply w-full flex flex-col text-center fixed top-0 left-0 right-0 bottom-0 z-50 pointer-events-auto;
        overflow-y: auto;
    }

    .chat-view-overlay.hidden-chat {
        animation: slideOut 0.3s ease forwards;
    }

    @keyframes slideIn {
        from {
            transform: translateX(100%);
        }

        to {
            transform: translateX(0);
        }
    }

    @keyframes slideOut {
        from {
            transform: translateX(0);
        }

        to {
            transform: translateX(100%);
            display: none;
        }
    }

    .messages-container {
        @apply flex flex-col w-full p-4 gap-4 flex-1;
    }

    .message-bubble {
        @apply flex flex-col w-auto max-w-[85%] h-auto self-start shadow-sm relative overflow-hidden mb-4;
        padding: 0.75rem;
        border-radius: 18px;
        border-bottom-left-radius: 2px;

        background-color: rgba(102, 217, 178, 0.4);
        backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        border-top: 1px solid rgba(255, 255, 255, 0.4);

        box-shadow:
            0 8px 24px -4px rgba(28, 124, 84, 0.1),
            inset 0 1px 1px rgba(255, 255, 255, 0.9);

        color: white;
    }

    .message-bubble.sent {
        @apply self-end;
        border-radius: 18px;
        border-bottom-left-radius: 18px;
        border-bottom-right-radius: 2px;

        background-color: rgba(255, 255, 255, 0.5);
        backdrop-filter: blur(20px);

        border: 1px solid rgba(255, 255, 255, 0.3);
        border-top: 1px solid rgba(255, 255, 255, 0.9);

        box-shadow:
            0 8px 24px -4px rgba(0, 0, 0, 0.1),
            inset 0 1px 1px rgba(255, 255, 255, 0.9);

        color: var(--color-gray-800);
    }

    .chat-date-separator {
        @apply flex items-center justify-center w-full gap-4 my-6 text-xs font-medium text-gray-500 uppercase tracking-widest;
    }

    .chat-date-separator::before,
    .chat-date-separator::after {
        content: '';
        @apply flex-1 border-t border-gray-300;
    }

    .chat-polaroid-card {
        @apply relative p-3 space-y-0 h-full isolate overflow-visible z-20 shrink-0 cursor-pointer;
        width: 280px;
        background: #fdfbf7;
        border-radius: 2px;
        box-shadow:
            0 -3px 8px -1px rgba(0, 0, 0, 0.08),
            0 4px 6px -1px rgba(0, 0, 0, 0.1),
            0 2px 4px -1px rgba(0, 0, 0, 0.06),
            0 10px 15px -3px rgba(0, 0, 0, 0.1),
            0 0 1px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s cubic-bezier(0.16, 1, 0.3, 1), box-shadow 0.2s ease;
        transform: rotate(-1deg);
        padding-bottom: 3.5rem;
    }

    .chat-polaroid-card::before {
        content: '';
        position: absolute;
        top: -15px;
        left: 50%;
        transform: translateX(-50%) rotate(-1deg);
        width: 40px;
        height: 35px;
        background-color: rgba(0, 255, 4, 0.8);
        border-radius: 1px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
        z-index: 25;
        pointer-events: none;
        opacity: 0.9;
    }

    .chat-polaroid-card:active {
        transform: scale(0.98);
    }

    .chat-polaroid-image-container {
        @apply w-full aspect-square overflow-hidden relative shadow-inner;
        border-radius: 1px;
    }

    .chat-polaroid-image {
        @apply w-full h-full object-cover;
        filter: contrast(1.05) saturate(1.05);
    }

    .chat-polaroid-content {
        @apply px-1 absolute bottom-2 left-0 right-0 text-center;
    }

    .chat-polaroid-title {
        @apply text-base font-medium text-gray-700 truncate text-center;
        font-family: 'Caveat', 'Indie Flower', 'Courier New', cursive;
        transform: rotate(-0.5deg);
    }

    .chat-user-header {
        @apply flex flex-row items-center justify-center gap-4 py-2 glass-backdrop-light w-full sticky top-0 z-50 shrink-0 rounded-b-3xl;
    }

    .chat-header-avatar-container {
        @apply w-12 h-12 rounded-full overflow-hidden shadow-md border-2 border-white ring-1 ring-gray-100;
    }

    .chat-header-name {
        @apply text-xl font-bold text-gray-600 tracking-tight;
    }

    .chat-loader {
        @apply flex flex-col items-center justify-center h-40 gap-3 opacity-60 m-auto;
    }

    .chat-loader-spinner {
        @apply w-8 h-8 border-4 border-primary_color border-t-transparent rounded-full animate-spin;
    }

    .chat-loader-text {
        @apply text-sm font-medium text-gray-500;
    }
}
